# üöÄ –ü—Ä–æ–≥—Ä–µ—Å—Å —Ä–µ–ª–∏–∑–∞

> –ê–∫—Ç—É–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ä–µ–ª–∏–∑–∞ Yalla Business Admin.

## –°—Ç–∞—Ç—É—Å: ‚úÖ –í –ü–†–û–î–ê–ö–®–ï–ù–ï

**–î–∞—Ç–∞ –∑–∞–ø—É—Å–∫–∞:** 2025-12-05  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-12-06  
**–í–µ—Ä—Å–∏—è:** MVP 1.1 (Lunch + Error Handling)

---

## üìä –¢–µ–∫—É—â–∏–π —Å—Ç–∞—Ç—É—Å

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç (MVP)
| –ú–æ–¥—É–ª—å | –°—Ç–∞—Ç—É—Å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|--------|----------|
| –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | ‚úÖ | JWT + Refresh tokens + –ò–º–ø–µ—Ä—à–æ–Ω–∞—Ü–∏—è |
| –ü—Ä–æ–µ–∫—Ç—ã | ‚úÖ | CRUD —Ñ–∏–ª–∏–∞–ª–æ–≤ —Å –º–∞—Å—Å–∏–≤–æ–º `serviceTypes` |
| –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ | ‚úÖ | RBAC —Å —Ä–æ–ª—è–º–∏ admin/manager |
| –°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ | ‚úÖ | HR –º–æ–¥—É–ª—å —Å –±—é–¥–∂–µ—Ç–∞–º–∏ –∏ –ø–æ–¥–ø–∏—Å–∫–∞–º–∏ |
| –ü–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –æ–±–µ–¥—ã | ‚úÖ | –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –æ–±–µ–¥—ã (–ö–æ–º–±–æ 25/35) |
| Dashboard | ‚úÖ | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ + —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏ |
| –ì–æ—Å—Ç–µ–≤—ã–µ –∑–∞–∫–∞–∑—ã | ‚úÖ | –†–∞–∑–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã (–∞–¥—Ä–µ—Å –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞) |
| –ò–º–ø–µ—Ä—à–æ–Ω–∞—Ü–∏—è | ‚úÖ | SUPER_ADMIN –º–æ–∂–µ—Ç –≤–æ–π—Ç–∏ –≤ –ª—é–±–æ–π –∞–∫–∫–∞—É–Ω—Ç |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | ‚úÖ | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–¥—ã + toast —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | ‚úÖ | Serilog + Correlation ID + Frontend Logger |

### –ó–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–æ (Phase 2)
| –ú–æ–¥—É–ª—å | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏—á–∏–Ω–∞ |
|--------|--------|---------|
| –ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ | üö´ | –ñ–¥—ë–º Client Web + Merchant Lite |
| –û–ø–ª–∞—Ç—ã | üö´ | –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ |
| –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ | üö´ | –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ |
| –ù–æ–≤–æ—Å—Ç–∏ | üö´ | –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ |
| –ü–∞—Ä—Ç–Ω—ë—Ä—ã | üö´ | –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ |

---

## üîó –°—Å—ã–ª–∫–∏ –Ω–∞ —Å—Ä–µ–¥—ã

### Production
| –°–µ—Ä–≤–∏—Å | URL |
|--------|-----|
| Frontend | https://yalla-business-crm.vercel.app |
| Backend API | https://business-crm-iu04.onrender.com |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | Supabase `qwkpqbfldvuxcxugxcmj` |

### Staging  
| –°–µ—Ä–≤–∏—Å | URL |
|--------|-----|
| Frontend | https://business-crm-git-develop-azamatrasuli-protonmes-projects.vercel.app |
| Backend API | https://business-crm-staging.onrender.com |
| –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö | Supabase `psuiiifwntvjhuzxronr` |

---

## üîê –£—á—ë—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –°—É–ø–µ—Ä-–∞–¥–º–∏–Ω (SUPER_ADMIN)
```
–¢–µ–ª–µ—Ñ–æ–Ω: +992901234567
–ü–∞—Ä–æ–ª—å: admin123
```

### GitHub
```
–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/azamatrasuli/business-crm
–í–µ—Ç–∫–∏: main (production), develop (staging)
```

---

## üìù –õ–æ–≥ –∏–∑–º–µ–Ω–µ–Ω–∏–π

### 2025-12-06 (v1.1)

#### Backend
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (ErrorCodes, AppException)
- ‚úÖ Global Exception Handler —Å —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ –æ—Ç–≤–µ—Ç–∞–º–∏
- ‚úÖ Serilog —Å Correlation ID –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏
- ‚úÖ –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ SQL –∑–∞–ø—Ä–æ—Å–æ–≤ (EF Core)
- ‚úÖ `projects.service_type` ‚Üí `projects.service_types` (–º–∞—Å—Å–∏–≤)
- ‚úÖ `lunch_subscriptions` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è: start_date, end_date, total_days, total_price, status
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –±–∞–≥ freeze –ª–∏–º–∏—Ç–∞ (2/–Ω–µ–¥–µ–ª—é —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è —Ç–µ–ª–µ—Ñ–æ–Ω–æ–≤ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤/–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### Frontend
- ‚úÖ –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (`lib/errors/index.ts`)
- ‚úÖ Auto-toast –¥–ª—è API –æ—à–∏–±–æ–∫ —á–µ—Ä–µ–∑ interceptor
- ‚úÖ Frontend Logger (`lib/logger/index.ts`)
- ‚úÖ Inline –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ö (phone, email –¥—É–±–ª–∏–∫–∞—Ç—ã)
- ‚úÖ UI "Backend –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω" —Å –∫–Ω–æ–ø–∫–æ–π "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å"
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å –∞–¥–º–∏–Ω–∞ —Ç–µ–ø–µ—Ä—å read-only
- ‚úÖ –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ ‚Äî –Ω–æ–≤—ã–µ –∫–æ–ª–æ–Ω–∫–∏: –ì—Ä–∞—Ñ–∏–∫ —Ä–∞–±–æ—Ç—ã, –¢–∏–ø —É—Å–ª—É–≥–∏, –°—Ç–∞—Ç—É—Å —É—Å–ª—É–≥–∏
- ‚úÖ –ì–æ—Å—Ç–µ–≤–æ–π –∑–∞–∫–∞–∑ ‚Äî —É–±—Ä–∞–Ω –≤—ã–±–æ—Ä –ø—Ä–æ–µ–∫—Ç–∞ (–∞–¥—Ä–µ—Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏–∑ –ø—Ä–æ–µ–∫—Ç–∞)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω full-screen loading –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –ª–æ–≥–∏–Ω–∞

### 2025-12-05 (v1.0)
- ‚úÖ –ü–µ—Ä–≤—ã–π —Ä–µ–ª–∏–∑ MVP –≤ production
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã Vercel + Render + Supabase
- ‚úÖ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Å—Ç–∞—Ä–æ–π CRM (6 –∫–æ–º–ø–∞–Ω–∏–π)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ Feature Flags

---

## üõ†Ô∏è –ú–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è PROD

–ü—Ä–∏ –º–µ—Ä–∂–µ `develop` ‚Üí `main` –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –ø—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏:

```sql
-- 1. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—è –≤ lunch_subscriptions
ALTER TABLE lunch_subscriptions 
ADD COLUMN IF NOT EXISTS start_date DATE,
ADD COLUMN IF NOT EXISTS end_date DATE,
ADD COLUMN IF NOT EXISTS total_days INTEGER DEFAULT 0,
ADD COLUMN IF NOT EXISTS total_price NUMERIC(10,2) DEFAULT 0,
ADD COLUMN IF NOT EXISTS status TEXT DEFAULT '–ê–∫—Ç–∏–≤–Ω–∞',
ADD COLUMN IF NOT EXISTS schedule_type TEXT DEFAULT 'EVERY_DAY',
ADD COLUMN IF NOT EXISTS paused_at TIMESTAMP WITH TIME ZONE,
ADD COLUMN IF NOT EXISTS paused_days_count INTEGER DEFAULT 0;

-- 2. –ò–∑–º–µ–Ω–∏—Ç—å service_type –Ω–∞ –º–∞—Å—Å–∏–≤ –≤ projects
ALTER TABLE projects 
  ALTER COLUMN service_type DROP DEFAULT,
  ALTER COLUMN service_type TYPE TEXT[] USING ARRAY[service_type];
ALTER TABLE projects 
  ALTER COLUMN service_type SET DEFAULT ARRAY['LUNCH']::TEXT[];
ALTER TABLE projects RENAME COLUMN service_type TO service_types;
```

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### Frontend (.env.local)
```bash
NEXT_PUBLIC_API_BASE_URL=http://localhost:5000/api
NEXT_PUBLIC_APP_ENV=development  # development | staging | production
```

### Backend (appsettings.json)
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=...;Database=...;Username=...;Password=...;SSL Mode=Require"
  },
  "Jwt": {
    "Secret": "–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á"
  },
  "Serilog": {
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft.EntityFrameworkCore.Database.Command": "Information"
      }
    }
  }
}
```

---

## üöß –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

### Phase 2 (–¥–µ–∫–∞–±—Ä—å 2025)
- [ ] –ú–æ–¥—É–ª—å –∫–æ–º–ø–µ–Ω—Å–∞—Ü–∏–π (–ø–æ—Å–ª–µ Client Web)
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Merchant Lite
- [ ] –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –æ—Ç—á—ë—Ç—ã

### Phase 3 (—è–Ω–≤–∞—Ä—å 2026)
- [ ] –ú–æ–¥—É–ª—å –æ–ø–ª–∞—Ç
- [ ] –ù–æ–≤–æ—Å—Ç–∏ –∏ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- [ ] –ö–∞—Ä—Ç–∞ –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤

---

## üÜò –ü—Ä–∏ —Å–±—Ä–æ—Å–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞

1. –ü—Ä–æ—á–∏—Ç–∞–π —ç—Ç–æ—Ç —Ñ–∞–π–ª
2. –ü–æ—Å–º–æ—Ç—Ä–∏ `docs/API.md` –¥–ª—è —Å–ø–∏—Å–∫–∞ —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
3. –í—Ö–æ–¥: `+992901234567` / `admin123`
4. –ö–æ–¥—ã –æ—à–∏–±–æ–∫: `backend/src/YallaBusinessAdmin.Application/Common/Errors/ErrorCodes.cs`
