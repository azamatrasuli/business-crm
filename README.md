# Yalla Business Admin

> üçΩÔ∏è B2B –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–æ—Ä–ø–æ—Ä–∞—Ç–∏–≤–Ω—ã–º –ø–∏—Ç–∞–Ω–∏–µ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

## –û –ø—Ä–æ–µ–∫—Ç–µ

**Yalla Business Admin** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è –∫–æ–º–ø–∞–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ —Ö–æ—Ç—è—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –ø–∏—Ç–∞–Ω–∏–µ –¥–ª—è —Å–≤–æ–∏—Ö —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤. –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞:

- **–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –æ–±–µ–¥—ã (Lunch)** ‚Äî –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –µ–∂–µ–¥–Ω–µ–≤–Ω—ã–µ –æ–±–µ–¥—ã —Å –¥–æ—Å—Ç–∞–≤–∫–æ–π
- **–ö–æ–º–ø–µ–Ω—Å–∞—Ü–∏–∏ (Compensation)** ‚Äî –≤–æ–∑–º–µ—â–µ–Ω–∏–µ —Ä–∞—Å—Ö–æ–¥–æ–≤ –Ω–∞ –ø–∏—Ç–∞–Ω–∏–µ –≤ —Ä–µ—Å—Ç–æ—Ä–∞–Ω–∞—Ö-–ø–∞—Ä—Ç–Ω—ë—Ä–∞—Ö

> ‚ö†Ô∏è –ü—Ä–æ–µ–∫—Ç—ã –º–æ–≥—É—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –æ–±–∞ —Ç–∏–ø–∞ —É—Å–ª—É–≥ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ (`serviceTypes: ['LUNCH', 'COMPENSATION']`), –Ω–æ –∫–∞–∂–¥—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–∏–Ω —Ç–∏–ø —É—Å–ª—É–≥–∏ –≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç –≤—Ä–µ–º–µ–Ω–∏.

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

```
yalla-business-admin/
‚îú‚îÄ‚îÄ config.json        # üîß –ï–¥–∏–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥ –ø—Ä–æ–µ–∫—Ç–∞ (—Ü–µ–Ω—ã, –ª–∏–º–∏—Ç—ã, feature flags)
‚îú‚îÄ‚îÄ frontend/          # Next.js 15 + React 19 + TypeScript
‚îú‚îÄ‚îÄ backend/           # ASP.NET Core 8 Web API  
‚îî‚îÄ‚îÄ docs/              # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (API, –¥–µ–ø–ª–æ–π)
```

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

| –ú–æ–¥—É–ª—å | –û–ø–∏—Å–∞–Ω–∏–µ |
|--------|----------|
| **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è** | JWT + Refresh tokens + –ò–º–ø–µ—Ä—à–æ–Ω–∞—Ü–∏—è –¥–ª—è SUPER_ADMIN |
| **–ü—Ä–æ–µ–∫—Ç—ã** | –ú—É–ª—å—Ç–∏–ø—Ä–æ–µ–∫—Ç–Ω–æ—Å—Ç—å ‚Äî –∫–æ–º–ø–∞–Ω–∏–∏ —Å –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏ —Ñ–∏–ª–∏–∞–ª–∞–º–∏ |
| **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏** | RBAC —Å —Ä–æ–ª—è–º–∏ admin/manager –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–º–∏ –ø—Ä–∞–≤–∞–º–∏ |
| **–°–æ—Ç—Ä—É–¥–Ω–∏–∫–∏** | HR –º–æ–¥—É–ª—å ‚Äî —à—Ç–∞—Ç, –±—é–¥–∂–µ—Ç—ã, –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–∞ –æ–±–µ–¥—ã |
| **–ü–æ–¥–ø–∏—Å–∫–∏** | –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –æ–±–µ–¥—ã (–ö–æ–º–±–æ 25 / –ö–æ–º–±–æ 35 —Å–æ–º–æ–Ω–∏) |
| **Dashboard** | –û–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø–∞–Ω–µ–ª—å —Å –∑–∞–∫–∞–∑–∞–º–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π |
| **–ì–æ—Å—Ç–µ–≤—ã–µ –∑–∞–∫–∞–∑—ã** | –†–∞–∑–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã –±–µ–∑ –ø–æ–¥–ø–∏—Å–∫–∏ (–∞–¥—Ä–µ—Å –ø—Ä–∏–≤—è–∑–∞–Ω –∫ –ø—Ä–æ–µ–∫—Ç—É) |
| **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** | –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫ + –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ |

## –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### Frontend

```bash
cd frontend
npm install
npm run dev
# ‚Üí http://localhost:3000
```

### Backend

```bash
cd backend
dotnet restore
dotnet run --project src/YallaBusinessAdmin.Api --launch-profile Development
# ‚Üí http://localhost:4000/api
# ‚Üí http://localhost:4000/swagger
```

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `./dev.sh` –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –æ–±–æ–∏—Ö —Å–µ—Ä–≤–∏—Å–æ–≤.

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**Frontend** (`.env.local`):
```env
NEXT_PUBLIC_API_BASE_URL=http://localhost:4000/api
NEXT_PUBLIC_APP_ENV=development
```

**Backend** (`appsettings.json`):
```json
{
  "ConnectionStrings": {
    "DefaultConnection": "Host=localhost;Database=yalla;Username=postgres;Password=..."
  },
  "Jwt": {
    "Secret": "–º–∏–Ω–∏–º—É–º-32-—Å–∏–º–≤–æ–ª–∞-—Å–µ–∫—Ä–µ—Ç–Ω—ã–π-–∫–ª—é—á"
  }
}
```

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### Frontend
```
frontend/
‚îú‚îÄ‚îÄ app/                    # Next.js App Router
‚îÇ   ‚îú‚îÄ‚îÄ (auth)/            # –°—Ç—Ä–∞–Ω–∏—Ü—ã –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îî‚îÄ‚îÄ (dashboard)/       # –ó–∞—â–∏—â—ë–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                # UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (shadcn/ui)
‚îÇ   ‚îú‚îÄ‚îÄ layout/            # –°–∞–π–¥–±–∞—Ä, —Ö–µ–¥–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ common/            # DataFetcher, –æ–±—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ skeletons/         # –°–∫–µ–ª–µ—Ç–æ–Ω—ã –∑–∞–≥—Ä—É–∑–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ features/          # –ë–∏–∑–Ω–µ—Å-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îú‚îÄ‚îÄ api/               # API –∫–ª–∏–µ–Ω—Ç—ã (axios)
‚îÇ   ‚îú‚îÄ‚îÄ hooks/             # –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏ (useAsync, usePagination, useDashboard)
‚îÇ   ‚îú‚îÄ‚îÄ repositories/      # Repository Pattern –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ queries/           # React Query options (CQRS reads)
‚îÇ   ‚îú‚îÄ‚îÄ commands/          # –ú—É—Ç–∞—Ü–∏–∏ —Å optimistic updates (CQRS writes)
‚îÇ   ‚îú‚îÄ‚îÄ adapters/          # –ê–¥–∞–ø—Ç–µ—Ä—ã (–∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –¥—Ä.)
‚îÇ   ‚îú‚îÄ‚îÄ events/            # Event Bus (Pub/Sub)
‚îÇ   ‚îú‚îÄ‚îÄ validation/        # Zod —Å—Ö–µ–º—ã –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ constants/         # –û–±—â–∏–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ errors/            # –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ logger/            # –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å correlation ID
‚îÇ   ‚îî‚îÄ‚îÄ features.config.ts # Feature flags
‚îî‚îÄ‚îÄ stores/                # Zustand stores
    ‚îî‚îÄ‚îÄ ui/                # UI-—Å—Ç–µ–π—Ç—ã (–º–æ–¥–∞–ª–∫–∏, —Å–∞–π–¥–±–∞—Ä, –≤—ã–±–æ—Ä)
```

### Backend (Clean Architecture)
```
backend/src/
‚îú‚îÄ‚îÄ YallaBusinessAdmin.Api/           # Controllers, Middleware, Program.cs
‚îú‚îÄ‚îÄ YallaBusinessAdmin.Application/   # DTOs, –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã, –≤–∞–ª–∏–¥–∞—Ü–∏—è, –æ—à–∏–±–∫–∏
‚îú‚îÄ‚îÄ YallaBusinessAdmin.Domain/        # Entities —Å Rich Domain Model, Enums
‚îî‚îÄ‚îÄ YallaBusinessAdmin.Infrastructure/# EF Core, Services (Facade Pattern)
    ‚îî‚îÄ‚îÄ Services/Dashboard/           # –†–∞–∑–±–∏—Ç—ã–µ —Å–µ—Ä–≤–∏—Å—ã (SRP)
```

## –ü–∞—Ç—Ç–µ—Ä–Ω—ã –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Backend
- **Clean Architecture** ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å–ª–æ–∏ (Domain, Application, Infrastructure, API)
- **Rich Domain Model** ‚Äî –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –≤ —Å—É—â–Ω–æ—Å—Ç—è—Ö (Employee.IsWorkingToday(), Activate(), Deactivate())
- **Facade Pattern** ‚Äî DashboardService –¥–µ–ª–µ–≥–∏—Ä—É–µ—Ç —Å–ø–µ—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º —Å–µ—Ä–≤–∏—Å–∞–º
- **Result Pattern** ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ–∂–∏–¥–∞–µ–º—ã—Ö –æ—à–∏–±–æ–∫ –±–µ–∑ –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- **Structured Logging** ‚Äî Serilog + Correlation ID –¥–ª—è —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫–∏

### Frontend  
- **Repository Pattern** ‚Äî –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–æ—Å—Ç—É–ø–∞ –∫ –¥–∞–Ω–Ω—ã–º
- **CQRS-lite** ‚Äî —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ queries (—á—Ç–µ–Ω–∏–µ) –∏ commands (–∑–∞–ø–∏—Å—å —Å optimistic updates)
- **Event Bus** ‚Äî Pub/Sub –¥–ª—è –º–µ–∂–∫–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω–æ–≥–æ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è
- **Compound Components** ‚Äî Wizard –¥–ª—è –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã—Ö —Ñ–æ—Ä–º
- **Custom Hooks** ‚Äî –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ –∏–∑ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (useDashboard, useOrderActions –∏ –¥—Ä.)
- **URL State** ‚Äî –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ query –ø–∞—Ä–∞–º–µ—Ç—Ä–∞—Ö

## –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫

### Backend ‚Äî —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏
```json
{
  "success": false,
  "error": {
    "code": "EMP_PHONE_EXISTS",
    "message": "–°–æ—Ç—Ä—É–¥–Ω–∏–∫ —Å —Ç–∞–∫–∏–º —Ç–µ–ª–µ—Ñ–æ–Ω–æ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç",
    "type": "Conflict"
  },
  "path": "/api/employees",
  "timestamp": "2024-12-06T10:30:00Z"
}
```

### Frontend ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –í—Å–µ API –æ—à–∏–±–∫–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ toast
- Inline –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤ —Ñ–æ—Ä–º–∞—Ö
- –ö–Ω–æ–ø–∫–∞ "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å" –ø—Ä–∏ —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–∫–∞—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–¥—ã –æ—à–∏–±–æ–∫

| –ö–æ–¥ | –û–ø–∏—Å–∞–Ω–∏–µ |
|-----|----------|
| `AUTH_INVALID_CREDENTIALS` | –ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å |
| `AUTH_USER_BLOCKED` | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω |
| `EMP_PHONE_EXISTS` | –¢–µ–ª–µ—Ñ–æ–Ω —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ —É–∂–µ –∑–∞–Ω—è—Ç |
| `PROJ_ADDRESS_IMMUTABLE` | –ê–¥—Ä–µ—Å –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–ª—å–∑—è –∏–∑–º–µ–Ω–∏—Ç—å |
| `FREEZE_LIMIT_EXCEEDED` | –ü—Ä–µ–≤—ã—à–µ–Ω –ª–∏–º–∏—Ç –∑–∞–º–æ—Ä–æ–∑–æ–∫ (2/–Ω–µ–¥–µ–ª—é) |
| `ORDER_CUTOFF_PASSED` | –í—Ä–µ–º—è –æ—Ç—Å–µ—á–∫–∏ –ø—Ä–æ—à–ª–æ |

–ü–æ–ª–Ω—ã–π —Å–ø–∏—Å–æ–∫: `backend/src/YallaBusinessAdmin.Application/Common/Errors/ErrorCodes.cs`

## –û–∫—Ä—É–∂–µ–Ω–∏—è

| –°—Ä–µ–¥–∞ | Frontend | Backend | –ë–î |
|-------|----------|---------|-----|
| Development | localhost:3000 | localhost:4000 | Supabase Dev |
| Staging | Vercel (develop) | Render Staging | Supabase Staging |
| Production | Vercel (main) | Render Prod | Supabase Prod |

## –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥

–í—Å–µ –±–∏–∑–Ω–µ—Å-–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ **`config.json`** –≤ –∫–æ—Ä–Ω–µ:

```json
{
  "business": {
    "orders": { "cutoffTime": "10:00" },      // –í—Ä–µ–º—è –æ—Ç—Å–µ—á–∫–∏ –∑–∞–∫–∞–∑–æ–≤
    "freezes": { "maxPerWeek": 2 },           // –õ–∏–º–∏—Ç –∑–∞–º–æ—Ä–æ–∑–æ–∫
    "subscriptions": { "minDays": 5 }         // –ú–∏–Ω–∏–º—É–º –¥–Ω–µ–π –ø–æ–¥–ø–∏—Å–∫–∏
  },
  "pricing": {
    "combos": {
      "COMBO_25": { "price": 25 },            // –¶–µ–Ω–∞ –∫–æ–º–±–æ
      "COMBO_35": { "price": 35 }
    }
  },
  "features": {                               // Feature flags
    "lunch": true,
    "compensation": false,
    "payments": false
  }
}
```

–ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –∫–æ–Ω—Ñ–∏–≥–∞ ‚Äî –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ `npm run dev` –∏–ª–∏ `npm run build`.

## –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- [API.md](docs/API.md) ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è REST API
- [DEPLOYMENT.md](docs/DEPLOYMENT.md) ‚Äî –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é

## –¢–µ—Å—Ç–æ–≤—ã–π –≤—Ö–æ–¥

```
–¢–µ–ª–µ—Ñ–æ–Ω: +992901234567
–ü–∞—Ä–æ–ª—å: admin123
–†–æ–ª—å: SUPER_ADMIN
```

## –õ–∏—Ü–µ–Ω–∑–∏—è

¬© 2024-2025 Yalla. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.
